<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercices Fitness - Bibliothèque Complète</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .navbar {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px);
            border-bottom: 3px solid var(--primary);
        }
        
        .hero-section {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 80px 0;
            clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%);
            margin-bottom: -50px;
        }
        
        .exercise-card {
            border: none;
            border-radius: 20px;
            transition: all 0.3s ease;
            overflow: hidden;
            height: 100%;
            background: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        }
        
        .exercise-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .muscle-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.8rem;
            z-index: 1;
        }
        
        .difficulty-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin: 2px;
        }
        
        .difficulty-debutant { background-color: var(--success); color: white; }
        .difficulty-intermediaire { background-color: var(--warning); color: black; }
        .difficulty-avance { background-color: var(--danger); color: white; }
        
        .calorie-badge {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .stats-card {
            border: none;
            border-radius: 15px;
            background: white;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        
        .stats-card:hover {
            transform: translateY(-5px);
        }
        
        .muscle-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            backdrop-filter: blur(5px);
        }
        
        .video-thumbnail {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 15px;
            transition: transform 0.3s;
        }
        
        .video-thumbnail:hover {
            transform: scale(1.05);
        }
        
        .filter-btn.active {
            background-color: var(--primary) !important;
            color: white !important;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .progress-bar-custom {
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .muscle-group {
            padding: 10px 20px;
            border-radius: 30px;
            margin: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .muscle-group:hover {
            transform: scale(1.05);
        }
        
        .muscle-pectoraux { background-color: rgba(255, 107, 107, 0.2); color: #ff6b6b; border: 2px solid #ff6b6b; }
        .muscle-jambes { background-color: rgba(78, 205, 196, 0.2); color: #4ecdc4; border: 2px solid #4ecdc4; }
        .muscle-dos { background-color: rgba(69, 183, 209, 0.2); color: #45b7d1; border: 2px solid #45b7d1; }
        .muscle-biceps { background-color: rgba(150, 206, 180, 0.2); color: #96ceb4; border: 2px solid #96ceb4; }
        .muscle-triceps { background-color: rgba(255, 178, 63, 0.2); color: #ffb23f; border: 2px solid #ffb23f; }
        .muscle-abdominaux { background-color: rgba(170, 142, 245, 0.2); color: #aa8ef5; border: 2px solid #aa8ef5; }
        .muscle-epaules { background-color: rgba(255, 107, 129, 0.2); color: #ff6b81; border: 2px solid #ff6b81; }
        
        .exercise-icon {
            font-size: 2rem;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light shadow-sm sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">
                <i class="fas fa-dumbbell text-danger me-2"></i>
                <span class="text-primary">FITNESS</span><span class="text-secondary">COACH</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html"><i class="fas fa-home me-1"></i>Accueil</a></li>
                    <li class="nav-item"><a class="nav-link" href="calculatrice.html"><i class="fas fa-calculator me-1"></i>Calculatrice</a></li>




                     <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Musculation
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="programesalle.html"> Programme d'entraînement hebdomadaire</a></li>
            <li><a class="dropdown-item" href="exercices.html">Exercices</a></li>
            <li><hr class="dropdown-divider"></li>
           
          </ul>
        </li>



                    <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            nutrition
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="repas.html">repas</a></li>
            <li><a class="dropdown-item" href="compl.html">Compléments Alimentaires</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="information nourriture.html">information nourriture</a></li>
          </ul>
                    <li class="nav-item"><a class="nav-link" href="contact.html"><i class="fas fa-envelope me-1"></i>Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-3">Bibliothèque d'Exercices</h1>
                    <p class="lead mb-4 opacity-90">
                        Découvrez +50 exercices détaillés avec vidéos, classés par groupe musculaire et difficulté.
                        Votre guide complet pour un entraînement efficace.
                    </p>
                    <div class="d-flex gap-3">
                        <a href="#exercises" class="btn btn-light btn-lg px-4">
                            <i class="fas fa-play me-2"></i>Explorer
                        </a>
                        <a href="#stats" class="btn btn-outline-light btn-lg px-4">
                            <i class="fas fa-chart-bar me-2"></i>Statistiques
                        </a>
                    </div>
                </div>
                <div class="col-lg-6 text-center">
                    <img src="bdannn.jpeg" 
                         alt="Exercices" class="img-fluid rounded-3 shadow" style="max-height: 300px;">
                </div>
            </div>
        </div>
    </section>

    <!-- Overlay de chargement -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="text-center">
            <div class="spinner-grow text-primary" style="width: 4rem; height: 4rem;" role="status">
                <span class="visually-hidden">Chargement...</span>
            </div>
            <h3 class="mt-4 text-primary">Chargement des exercices...</h3>
            <p class="text-muted">Préparation de votre bibliothèque fitness</p>
        </div>
    </div>

    <!-- Contenu principal -->
    <main class="container py-5">
        <!-- Statistiques -->
        <section id="stats" class="mb-5">
            <h2 class="text-center mb-4">Vue d'Ensemble</h2>
            <div class="row g-4" id="statsContainer">
                <!-- Les stats seront chargées via JS -->
            </div>
        </section>

        <!-- Filtres -->
        <section class="mb-5">
            <div class="card border-0 shadow">
                <div class="card-body p-4">
                    <h4 class="card-title mb-4">
                        <i class="fas fa-filter text-primary me-2"></i>Filtrer les Exercices
                    </h4>
                    
                    <!-- Groupes musculaires -->
                    <div class="mb-4">
                        <h6 class="fw-bold mb-3">Groupe Musculaire</h6>
                        <div class="d-flex flex-wrap gap-2" id="muscleFilters">
                            <!-- Généré par JavaScript -->
                        </div>
                    </div>
                    
                    <div class="row">
                        <!-- Difficulté -->
                        <div class="col-md-4 mb-3">
                            <h6 class="fw-bold mb-3">Niveau de Difficulté</h6>
                            <div class="btn-group-vertical w-100" role="group">
                                <button type="button" class="btn btn-outline-primary text-start filter-btn" data-filter="all" data-type="difficulty">
                                    <i class="fas fa-layer-group me-2"></i>Tous les niveaux
                                </button>
                                <button type="button" class="btn btn-outline-success text-start filter-btn" data-filter="Débutant" data-type="difficulty">
                                    <i class="fas fa-star-half-alt me-2"></i>Débutant
                                </button>
                                <button type="button" class="btn btn-outline-warning text-start filter-btn" data-filter="Intermédiaire" data-type="difficulty">
                                    <i class="fas fa-star me-2"></i>Intermédiaire
                                </button>
                                <button type="button" class="btn btn-outline-danger text-start filter-btn" data-filter="Avancé" data-type="difficulty">
                                    <i class="fas fa-crown me-2"></i>Avancé
                                </button>
                            </div>
                        </div>
                        
                        <!-- Calories -->
                        <div class="col-md-4 mb-3">
                            <h6 class="fw-bold mb-3">Intensité Calorique</h6>
                            <div class="btn-group-vertical w-100" role="group">
                                <button type="button" class="btn btn-outline-primary text-start filter-btn" data-filter="all" data-type="calories">
                                    <i class="fas fa-fire me-2"></i>Toutes intensités
                                </button>
                                <button type="button" class="btn btn-outline-info text-start filter-btn" data-filter="low" data-type="calories">
                                    <i class="fas fa-thermometer-empty me-2"></i>Faible (0-300 kcal/h)
                                </button>
                                <button type="button" class="btn btn-outline-warning text-start filter-btn" data-filter="medium" data-type="calories">
                                    <i class="fas fa-thermometer-half me-2"></i>Moyen (301-500 kcal/h)
                                </button>
                                <button type="button" class="btn btn-outline-danger text-start filter-btn" data-filter="high" data-type="calories">
                                    <i class="fas fa-thermometer-full me-2"></i>Élevé (500+ kcal/h)
                                </button>
                            </div>
                        </div>
                        
                        <!-- Recherche -->
                        <div class="col-md-4 mb-3">
                            <h6 class="fw-bold mb-3">Recherche Avancée</h6>
                            <div class="input-group mb-3">
                                <span class="input-group-text">
                                    <i class="fas fa-search"></i>
                                </span>
                                <input type="text" id="searchExercise" class="form-control" placeholder="Nom d'exercice...">
                            </div>
                            <div class="d-grid">
                                <button id="resetFilters" class="btn btn-outline-secondary">
                                    <i class="fas fa-redo me-2"></i>Réinitialiser
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cartes d'exercices -->
        <section id="exercises" class="mb-5">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="mb-0">Exercices Disponibles</h2>
                <span class="badge bg-primary fs-6" id="exerciseCount">0 exercices</span>
            </div>
            
            <div id="exercisesGrid" class="row g-4">
                <!-- Les cartes seront chargées via AJAX -->
            </div>
            
            <!-- Message si aucun résultat -->
            <div id="noResults" class="text-center py-5" style="display: none;">
                <i class="fas fa-dumbbell fa-4x text-muted mb-4"></i>
                <h4 class="text-muted">Aucun exercice trouvé</h4>
                <p class="text-muted">Essayez de modifier vos filtres de recherche</p>
            </div>
        </section>

        <!-- Tableau DataTables -->
        <section class="mb-5">
            <div class="card border-0 shadow">
                <div class="card-body p-4">
                    <h4 class="card-title mb-4">
                        <i class="fas fa-table text-primary me-2"></i>Tableau Comparatif
                    </h4>
                    <div class="table-responsive">
                        <table id="exercisesTable" class="table table-striped table-hover" style="width:100%">
                            <thead class="table-primary">
                                <tr>
                                    <th>ID</th>
                                    <th>Exercice</th>
                                    <th>Groupe Musculaire</th>
                                    <th>Difficulté</th>
                                    <th>Calories/h</th>
                                    <th>Description</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Les données seront chargées via AJAX -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Graphiques -->
        <section class="mb-5">
            <h2 class="text-center mb-4">Analyses et Statistiques</h2>
            <div class="row g-4">
                <!-- Graphique 1 -->
                <div class="col-lg-6">
                    <div class="card border-0 shadow h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-chart-pie text-primary me-2"></i>
                                Répartition par Difficulté
                            </h5>
                            <div class="chart-container">
                                <canvas id="difficultyChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Graphique 2 -->
                <div class="col-lg-6">
                    <div class="card border-0 shadow h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-chart-bar text-success me-2"></i>
                                Calories par Groupe Musculaire
                            </h5>
                            <div class="chart-container">
                                <canvas id="muscleCalorieChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Conseils d'entraînement -->
        <section class="mb-5">
            <div class="card border-0 shadow bg-gradient text-white" style="background: linear-gradient(135deg, var(--primary), var(--secondary));">
                <div class="card-body p-5">
                    <div class="row align-items-center">
                        <div class="col-lg-8">
                            <h3 class="card-title mb-3">
                                <i class="fas fa-lightbulb me-2"></i>Conseils d'Entraînement
                            </h3>
                            <p class="card-text opacity-90">
                                Pour des résultats optimaux, combinez différents groupes musculaires et 
                                variez les niveaux de difficulté. N'oubliez pas l'échauffement avant chaque 
                                séance et les étirements après.
                            </p>
                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center mb-3">
                                        <i class="fas fa-check-circle fa-2x me-3 opacity-75"></i>
                                        <div>
                                            <h6 class="mb-0">Échauffement</h6>
                                            <small class="opacity-75">10-15 min avant chaque séance</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center mb-3">
                                        <i class="fas fa-check-circle fa-2x me-3 opacity-75"></i>
                                        <div>
                                            <h6 class="mb-0">Hydratation</h6>
                                            <small class="opacity-75">Buvez régulièrement pendant l'effort</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 text-center">
                            <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" 
                                 alt="Conseils" class="img-fluid rounded-3 shadow">
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h5 class="mb-3">
                        <i class="fas fa-dumbbell text-danger me-2"></i>
                        FITNESS COACH
                    </h5>
                    <p class="text-white-75 mb-0">
                        Votre partenaire pour un entraînement efficace et sûr.
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="calculatrice.html" class="text-white-50 me-3">
                        <i class="fas fa-calculator me-1"></i>Calculatrice
                    </a>
                    <a href="repas.html" class="text-white-50 me-3">
                        <i class="fas fa-utensils me-1"></i>Nutrition
                    </a>
                    <a href="contact.html" class="text-white-50">
                        <i class="fas fa-question-circle me-1"></i>Aide
                    </a>
                </div>
            </div>
            <hr class="bg-light my-3">
            <p class="text-center text-white-75 mb-0">
                © 2026 Fitness Coach. Tous droits réservés. | 
                <a href="#" class="text-white-50 text-decoration-none">Mentions légales</a> | 
                <a href="#" class="text-white-50 text-decoration-none">Confidentialité</a>
            </p>
        </div>
    </footer>

    <!-- Modal des détails -->
    <div class="modal fade" id="exerciseModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exerciseModalTitle">Détails de l'Exercice</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h3 id="exerciseName"></h3>
                            <div class="mb-3">
                                <span id="exerciseMuscle" class="badge fs-6 p-2 mb-2"></span>
                                <span id="exerciseDifficulty" class="badge fs-6 p-2 mb-2 ms-2"></span>
                            </div>
                            <p id="exerciseDescription" class="text-muted"></p>
                            
                            <div class="mt-4">
                                <h5>Informations</h5>
                                <div class="row">
                                    <div class="col-6">
                                        <div class="p-3 bg-light rounded mb-3">
                                            <small class="text-muted d-block">Calories brûlées</small>
                                            <h4 id="exerciseCalories" class="text-primary mb-0"></h4>
                                            <small>par heure</small>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="p-3 bg-light rounded mb-3">
                                            <small class="text-muted d-block">Intensité</small>
                                            <div class="d-flex align-items-center">
                                                <div id="intensityStars"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Démonstration Vidéo</h5>
                                    <div class="ratio ratio-16x9 mb-3">
                                        <iframe id="exerciseVideo" frameborder="0" allowfullscreen></iframe>
                                    </div>
                                    <div class="alert alert-info">
                                        <i class="fas fa-info-circle me-2"></i>
                                        <small>Regardez la vidéo pour une exécution correcte de l'exercice.</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">Conseils d'Exécution</h6>
                                    <ul class="list-unstyled" id="exerciseTips">
                                        <!-- Tips will be added by JavaScript -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">Groupes Musculaires Sollicités</h6>
                                    <div id="muscleGroupsList">
                                        <!-- Muscle groups will be added by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                    <button type="button" class="btn btn-primary" id="addToWorkoutBtn">
                        <i class="fas fa-plus-circle me-2"></i>Ajouter à ma séance
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Script principal amélioré -->
    <script>
        // Variables globales
        let exercisesData = [];
        let exercisesTable;
        let difficultyChart;
        let muscleCalorieChart;
        let currentFilters = {
            muscle: 'all',
            difficulty: 'all',
            calories: 'all',
            search: ''
        };
        
        // Données améliorées avec plus d'exercices
        const extendedExercises = {
            "exercices": [
                {
                    "id": 1,
                    "nom": "Développé couché avec barre",
                    "muscle": "Pectoraux",
                    "difficulté": "Intermédiaire",
                    "calories_par_heure": 420,
                    "description": "Exercice fondamental pour développer la masse et la force des pectoraux. Travaille également les épaules et les triceps.",
                    "vidéo_url": "https://www.youtube.com/embed/rT7DgCr-3pg",
                    "tips": [
                        "Gardez les pieds bien au sol",
                        "Descendez la barre jusqu'au milieu de la poitrine",
                        "Contractez les pectoraux en montant"
                    ],
                    "icon": "fas fa-weight-hanging"
                },
                {
                    "id": 2,
                    "nom": "Squat complet",
                    "muscle": "Jambes",
                    "difficulté": "Avancé",
                    "calories_par_heure": 650,
                    "description": "Le roi des exercices pour les jambes. Travaille quadriceps, ischio-jambiers, fessiers et muscles stabilisateurs.",
                    "vidéo_url": "https://www.youtube.com/embed/bEv6CCg2BC8",
                    "tips": [
                        "Gardez le dos droit",
                        "Descendez jusqu'à ce que les cuisses soient parallèles au sol",
                        "Poussez avec les talons"
                    ],
                    "icon": "fas fa-walking"
                },
                {
                    "id": 3,
                    "nom": "Tirage horizontal à la poulie",
                    "muscle": "Dos",
                    "difficulté": "Intermédiaire",
                    "calories_par_heure": 380,
                    "description": "Excellent pour l'épaisseur du dos. Cible principalement les grands dorsaux et les rhomboïdes.",
                    "vidéo_url": "https://www.youtube.com/embed/9efgcAjQe7E",
                    "tips": [
                        "Tirez avec les coudes",
                        "Contractez les omoplates",
                        "Contrôlez le mouvement de retour"
                    ],
                    "icon": "fas fa-arrows-alt-h"
                },
                {
                    "id": 4,
                    "nom": "Curl biceps avec haltères",
                    "muscle": "Biceps",
                    "difficulté": "Débutant",
                    "calories_par_heure": 280,
                    "description": "Exercice d'isolation pour développer le volume des biceps. Permet une bonne amplitude de mouvement.",
                    "vidéo_url": "https://www.youtube.com/embed/sAq_ocpRh_I",
                    "tips": [
                        "Gardez les coudes fixes",
                        "Soulevez avec contrôle",
                        "Contractez en haut du mouvement"
                    ],
                    "icon": "fas fa-hand-rock"
                },
                {
                    "id": 5,
                    "nom": "Extensions triceps à la poulie haute",
                    "muscle": "Triceps",
                    "difficulté": "Débutant",
                    "calories_par_heure": 320,
                    "description": "Isolation des triceps pour développer le bras dans sa partie postérieure. Idéal pour la définition.",
                    "vidéo_url": "https://www.youtube.com/embed/6SS6K3lAwZ8",
                    "tips": [
                        "Gardez les coudes serrés",
                        "Étendez complètement les bras",
                        "Évitez de balancer le corps"
                    ],
                    "icon": "fas fa-hand-point-down"
                },
                {
                    "id": 6,
                    "nom": "Crunch abdominal sur banc",
                    "muscle": "Abdominaux",
                    "difficulté": "Débutant",
                    "calories_par_heure": 240,
                    "description": "Renforcement des abdominaux supérieurs avec support lombaire. Réduit la tension sur le bas du dos.",
                    "vidéo_url": "https://www.youtube.com/embed/0t4t3IpiEao",
                    "tips": [
                        "Soulevez seulement les épaules",
                        "Expirez en montant",
                        "Maintenez la contraction"
                    ],
                    "icon": "fas fa-user-md"
                },
                {
                    "id": 7,
                    "nom": "Élévations latérales avec haltères",
                    "muscle": "Épaules",
                    "difficulté": "Intermédiaire",
                    "calories_par_heure": 350,
                    "description": "Développe les deltoïdes latéraux pour des épaules plus larges. Donne la forme en V au torse.",
                    "vidéo_url": "https://www.youtube.com/embed/3VcKaXpzqRo",
                    "tips": [
                        "Légère flexion des coudes",
                        "Soulevez jusqu'à l'horizontale",
                        "Contrôlez la descente"
                    ],
                    "icon": "fas fa-arrows-alt"
                },
                {
                    "id": 8,
                    "nom": "Soulevé de terre conventionnel",
                    "muscle": "Dos",
                    "difficulté": "Avancé",
                    "calories_par_heure": 580,
                    "description": "Exercice complet qui engage tout le corps. Développe la force du dos, des jambes et des avant-bras.",
                    "vidéo_url": "https://www.youtube.com/embed/op9kVnSso6Q",
                    "tips": [
                        "Dos droit, poitrine sortie",
                        "Poussez avec les jambes",
                        "Gardez la barre proche du corps"
                    ],
                    "icon": "fas fa-weight"
                },
                {
                    "id": 9,
                    "nom": "Pull-down à la machine",
                    "muscle": "Dos",
                    "difficulté": "Intermédiaire",
                    "calories_par_heure": 340,
                    "description": "Alternative aux tractions pour développer la largeur du dos. Excellent pour les grands dorsaux.",
                    "vidéo_url": "https://www.youtube.com/embed/JA0i9DfB-1o",
                    "tips": [
                        "Tirez avec le dos, pas avec les bras",
                        "Amenez la barre au menton",
                        "Contrôlez la remontée"
                    ],
                    "icon": "fas fa-arrows-alt-v"
                },
                {
                    "id": 10,
                    "nom": "Leg press à 45°",
                    "muscle": "Jambes",
                    "difficulté": "Intermédiaire",
                    "calories_par_heure": 520,
                    "description": "Exercice pour les jambes avec support dorsal. Permet de charger lourd en sécurité.",
                    "vidéo_url": "https://www.youtube.com/embed/IZxyjW7MPJQ",
                    "tips": [
                        "Ne verrouillez pas les genoux",
                        "Descendez jusqu'à 90°",
                        "Poussez avec l'ensemble du pied"
                    ],
                    "icon": "fas fa-shoe-prints"
                },
                {
                    "id": 11,
                    "nom": "Développé militaire debout",
                    "muscle": "Épaules",
                    "difficulté": "Avancé",
                    "calories_par_heure": 450,
                    "description": "Développe la masse et la force des épaules. Engage également les triceps et le haut du corps.",
                    "vidéo_url": "https://www.youtube.com/embed/2yjwXTZQDDI",
                    "tips": [
                        "Gainez les abdos",
                        "Montez la barre au-dessus de la tête",
                        "Évitez de cambrer le dos"
                    ],
                    "icon": "fas fa-arrow-up"
                },
                {
                    "id": 12,
                    "nom": "Tractions pronation",
                    "muscle": "Dos",
                    "difficulté": "Avancé",
                    "calories_par_heure": 480,
                    "description": "Exercice au poids du corps pour le dos. Excellent pour développer la largeur et la force.",
                    "vidéo_url": "https://www.youtube.com/embed/eGo4IYlbE5g",
                    "tips": [
                        "Poitrine vers la barre",
                        "Descendez avec contrôle",
                        "Gainez le corps"
                    ],
                    "icon": "fas fa-arrow-circle-up"
                },
                {
                    "id": 13,
                    "nom": "Pompes classiques",
                    "muscle": "Pectoraux",
                    "difficulté": "Débutant",
                    "calories_par_heure": 320,
                    "description": "Exercice fondamental au poids du corps. Travaille les pectoraux, triceps et épaules.",
                    "vidéo_url": "https://www.youtube.com/embed/IODxDxX7oi4",
                    "tips": [
                        "Corps aligné de la tête aux pieds",
                        "Descendez jusqu'à effleurer le sol",
                        "Poussez avec la poitrine"
                    ],
                    "icon": "fas fa-user"
                },
                {
                    "id": 14,
                    "nom": "Fentes avant avec haltères",
                    "muscle": "Jambes",
                    "difficulté": "Intermédiaire",
                    "calories_par_heure": 420,
                    "description": "Exercice unilatéral pour les jambes. Améliore l'équilibre et la coordination.",
                    "vidéo_url": "https://www.youtube.com/embed/D7KaRcUTQeE",
                    "tips": [
                        "Genou avant à 90°",
                        "Genou arrière frôle le sol",
                        "Dos droit"
                    ],
                    "icon": "fas fa-football-ball"
                },
                {
                    "id": 15,
                    "nom": "Rowing barre buste penché",
                    "muscle": "Dos",
                    "difficulté": "Intermédiaire",
                    "calories_par_heure": 400,
                    "description": "Exercice pour l'épaisseur du dos. Cible les rhomboïdes et le milieu du dos.",
                    "vidéo_url": "https://www.youtube.com/embed/9efgcAjQe7E",
                    "tips": [
                        "Dos parallèle au sol",
                        "Tirez la barre vers le bas-ventre",
                        "Contractez les omoplates"
                    ],
                    "icon": "fas fa-anchor"
                },
                {
                    "id": 16,
                    "nom": "Planche abdominale",
                    "muscle": "Abdominaux",
                    "difficulté": "Débutant",
                    "calories_par_heure": 180,
                    "description": "Exercice isométrique pour le gainage. Renforce les abdominaux profonds et améliore la posture.",
                    "vidéo_url": "https://www.youtube.com/embed/pSHjTRCQxIw",
                    "tips": [
                        "Corps aligné comme une planche",
                        "Contractez les abdos et fessiers",
                        "Respirez normalement"
                    ],
                    "icon": "fas fa-border-style"
                },
                {
                    "id": 17,
                    "nom": "Burpees complets",
                    "muscle": "Full Body",
                    "difficulté": "Avancé",
                    "calories_par_heure": 680,
                    "description": "Exercice complet qui combine squat, pompe et saut. Excellent pour le cardio et la force.",
                    "vidéo_url": "https://www.youtube.com/embed/JZQA08SlJnM",
                    "tips": [
                        "Enchaînez les mouvements fluidement",
                        "Saut le plus haut possible",
                        "Maintenez un rythme régulier"
                    ],
                    "icon": "fas fa-bolt"
                },
                {
                    "id": 18,
                    "nom": "Mountain climbers",
                    "muscle": "Abdominaux",
                    "difficulté": "Intermédiaire",
                    "calories_par_heure": 550,
                    "description": "Exercice dynamique qui combine cardio et renforcement abdominal. Améliore l'endurance musculaire.",
                    "vidéo_url": "https://www.youtube.com/embed/cnyTQDSE884",
                    "tips": [
                        "Mains sous les épaules",
                        "Amenez les genoux vers la poitrine",
                        "Rythme rapide et contrôlé"
                    ],
                    "icon": "fas fa-mountain"
                }
            ]
        };
        
        // Fonction pour charger les exercices
        function chargerExercices() {
            $('#loadingOverlay').show();
            
            // Simuler un délai de chargement
            setTimeout(() => {
                // Utiliser les données étendues
                exercisesData = extendedExercises.exercices;
                
                // Initialiser les filtres musculaires
                initialiserFiltresMuscles();
                
                // Afficher les statistiques
                afficherStats(exercisesData);
                
                // Afficher les cartes
                afficherCartesExercices(exercisesData);
                
                // Initialiser le tableau
                initialiserTableau(exercisesData);
                
                // Afficher les graphiques
                afficherGraphiques(exercisesData);
                
                // Masquer le chargement
                setTimeout(() => {
                    $('#loadingOverlay').hide();
                }, 500);
                
            }, 1500);
        }
        
        // Fonction pour initialiser les filtres musculaires
        function initialiserFiltresMuscles() {
            const muscles = [...new Set(exercisesData.map(ex => ex.muscle))];
            const container = $('#muscleFilters');
            
            // Ajouter "Tous"
            container.append(`
                <button type="button" class="btn btn-primary muscle-group active" data-muscle="all">
                    <i class="fas fa-layer-group me-1"></i>Tous
                </button>
            `);
            
            // Ajouter chaque muscle avec sa couleur
            muscles.forEach(muscle => {
                let colorClass = '';
                switch(muscle) {
                    case 'Pectoraux': colorClass = 'muscle-pectoraux'; break;
                    case 'Jambes': colorClass = 'muscle-jambes'; break;
                    case 'Dos': colorClass = 'muscle-dos'; break;
                    case 'Biceps': colorClass = 'muscle-biceps'; break;
                    case 'Triceps': colorClass = 'muscle-triceps'; break;
                    case 'Abdominaux': colorClass = 'muscle-abdominaux'; break;
                    case 'Épaules': colorClass = 'muscle-epaules'; break;
                    case 'Full Body': colorClass = 'muscle-pectoraux'; break;
                    default: colorClass = 'muscle-dos';
                }
                
                container.append(`
                    <button type="button" class="btn ${colorClass} muscle-group" data-muscle="${muscle}">
                        <i class="fas fa-dumbbell me-1"></i>${muscle}
                    </button>
                `);
            });
            
            // Événements pour les filtres musculaires
            $('.muscle-group').on('click', function() {
                const muscle = $(this).data('muscle');
                
                // Mettre à jour les boutons actifs
                $('.muscle-group').removeClass('active');
                $(this).addClass('active');
                
                // Mettre à jour le filtre
                currentFilters.muscle = muscle;
                afficherCartesExercices(exercisesData);
            });
        }
        
        // Fonction pour afficher les statistiques
        function afficherStats(exercises) {
            const totalExercises = exercises.length;
            const avgCalories = Math.round(exercises.reduce((sum, ex) => sum + ex.calories_par_heure, 0) / totalExercises);
            const muscleGroups = [...new Set(exercises.map(ex => ex.muscle))].length;
            const beginnerCount = exercises.filter(ex => ex.difficulté === 'Débutant').length;
            
            const statsHTML = `
                <div class="col-md-3 col-6">
                    <div class="stats-card text-center">
                        <div class="exercise-icon text-primary">
                            <i class="fas fa-dumbbell"></i>
                        </div>
                        <h3 class="text-primary">${totalExercises}</h3>
                        <p class="text-muted mb-0">Exercices</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="stats-card text-center">
                        <div class="exercise-icon text-success">
                            <i class="fas fa-fire"></i>
                        </div>
                        <h3 class="text-success">${avgCalories}</h3>
                        <p class="text-muted mb-0">Calories moyennes/h</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="stats-card text-center">
                        <div class="exercise-icon text-warning">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <h3 class="text-warning">${muscleGroups}</h3>
                        <p class="text-muted mb-0">Groupes musculaires</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="stats-card text-center">
                        <div class="exercise-icon text-info">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h3 class="text-info">${beginnerCount}</h3>
                        <p class="text-muted mb-0">Exercices débutants</p>
                    </div>
                </div>
            `;
            
            $('#statsContainer').html(statsHTML);
        }
        
        // Fonction pour filtrer les exercices
        function filtrerExercices(exercises, filters) {
            return exercises.filter(exercise => {
                // Filtre par muscle
                if (filters.muscle !== 'all' && exercise.muscle !== filters.muscle) {
                    return false;
                }
                
                // Filtre par difficulté
                if (filters.difficulty !== 'all' && exercise.difficulté !== filters.difficulty) {
                    return false;
                }
                
                // Filtre par calories
                if (filters.calories !== 'all') {
                    if (filters.calories === 'low' && exercise.calories_par_heure > 300) return false;
                    if (filters.calories === 'medium' && (exercise.calories_par_heure <= 300 || exercise.calories_par_heure > 500)) return false;
                    if (filters.calories === 'high' && exercise.calories_par_heure <= 500) return false;
                }
                
                // Filtre par recherche
                if (filters.search && !exercise.nom.toLowerCase().includes(filters.search.toLowerCase())) {
                    return false;
                }
                
                return true;
            });
        }
        
        // Fonction pour afficher les cartes d'exercices
        function afficherCartesExercices(exercises) {
            const filteredExercises = filtrerExercices(exercises, currentFilters);
            const container = $('#exercisesGrid');
            const noResults = $('#noResults');
            const exerciseCount = $('#exerciseCount');
            
            container.empty();
            
            if (filteredExercises.length === 0) {
                noResults.show();
                exerciseCount.text('0 exercices');
                return;
            }
            
            noResults.hide();
            exerciseCount.text(`${filteredExercises.length} exercices`);
            
            filteredExercises.forEach(exercise => {
                // Déterminer la couleur de difficulté
                let difficultyClass, difficultyIcon;
                switch(exercise.difficulté) {
                    case 'Débutant':
                        difficultyClass = 'difficulty-debutant';
                        difficultyIcon = 'fas fa-star-half-alt';
                        break;
                    case 'Intermédiaire':
                        difficultyClass = 'difficulty-intermediaire';
                        difficultyIcon = 'fas fa-star';
                        break;
                    case 'Avancé':
                        difficultyClass = 'difficulty-avance';
                        difficultyIcon = 'fas fa-crown';
                        break;
                }
                
                // Déterminer la couleur du muscle
                let muscleColor;
                switch(exercise.muscle) {
                    case 'Pectoraux': muscleColor = '#ff6b6b'; break;
                    case 'Jambes': muscleColor = '#4ecdc4'; break;
                    case 'Dos': muscleColor = '#45b7d1'; break;
                    case 'Biceps': muscleColor = '#96ceb4'; break;
                    case 'Triceps': muscleColor = '#ffb23f'; break;
                    case 'Abdominaux': muscleColor = '#aa8ef5'; break;
                    case 'Épaules': muscleColor = '#ff6b81'; break;
                    case 'Full Body': muscleColor = '#667eea'; break;
                    default: muscleColor = '#6c757d';
                }
                
                // Calculer l'intensité (étoiles)
                let intensityStars = '';
                const intensity = Math.min(5, Math.ceil(exercise.calories_par_heure / 150));
                for (let i = 1; i <= 5; i++) {
                    intensityStars += `<i class="fas fa-star ${i <= intensity ? 'text-warning' : 'text-muted'}"></i>`;
                }
                
                const cardHTML = `
                    <div class="col-md-4 col-lg-3">
                        <div class="exercise-card" data-id="${exercise.id}">
                            <div class="p-4">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <div class="exercise-icon text-primary">
                                            <i class="${exercise.icon || 'fas fa-dumbbell'}"></i>
                                        </div>
                                        <h5 class="fw-bold mb-1">${exercise.nom}</h5>
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="${difficultyClass} difficulty-badge me-2">
                                                <i class="${difficultyIcon} me-1"></i>${exercise.difficulté}
                                            </span>
                                            <span class="badge" style="background-color: ${muscleColor}; color: white;">
                                                ${exercise.muscle}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                
                                <p class="text-muted small mb-3">${exercise.description.substring(0, 80)}...</p>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <small class="text-muted">Brûle calories</small>
                                        <span class="fw-bold text-primary">${exercise.calories_par_heure} kcal/h</span>
                                    </div>
                                    <div class="progress progress-bar-custom">
                                        <div class="progress-bar bg-gradient" 
                                             style="width: ${(exercise.calories_par_heure / 700) * 100}%; background: linear-gradient(90deg, #ff6b6b, #ee5a24);">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <small class="text-muted d-block">Intensité</small>
                                        <div>${intensityStars}</div>
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-between">
                                    <button class="btn btn-sm btn-outline-primary btn-details" data-id="${exercise.id}">
                                        <i class="fas fa-info-circle me-1"></i> Détails
                                    </button>
                                    <button class="btn btn-sm btn-success">
                                        <i class="fas fa-plus me-1"></i> Ajouter
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.append(cardHTML);
            });
            
            // Événements pour les boutons détails
            $('.btn-details').off('click').on('click', function(e) {
                e.stopPropagation();
                const id = $(this).data('id');
                afficherDetailsExercice(id);
            });
            
            // Événement pour cliquer sur la carte
            $('.exercise-card').off('click').on('click', function() {
                const id = $(this).data('id');
                afficherDetailsExercice(id);
            });
        }
        
        // Fonction pour afficher les détails d'un exercice
        function afficherDetailsExercice(id) {
            const exercise = exercisesData.find(ex => ex.id == id);
            if (!exercise) return;
            
            // Mettre à jour le modal
            $('#exerciseModalTitle').text(exercise.nom);
            $('#exerciseName').text(exercise.nom);
            $('#exerciseDescription').text(exercise.description);
            $('#exerciseCalories').text(exercise.calories_par_heure);
            
            // Muscle et difficulté
            $('#exerciseMuscle').text(exercise.muscle);
            $('#exerciseDifficulty').text(exercise.difficulté);
            
            // Définir la couleur du muscle
            let muscleColor;
            switch(exercise.muscle) {
                case 'Pectoraux': muscleColor = '#ff6b6b'; break;
                case 'Jambes': muscleColor = '#4ecdc4'; break;
                case 'Dos': muscleColor = '#45b7d1'; break;
                default: muscleColor = '#6c757d';
            }
            $('#exerciseMuscle').css('background-color', muscleColor);
            
            // Définir la couleur de difficulté
            let difficultyColor;
            switch(exercise.difficulté) {
                case 'Débutant': difficultyColor = '#28a745'; break;
                case 'Intermédiaire': difficultyColor = '#ffc107'; break;
                case 'Avancé': difficultyColor = '#dc3545'; break;
                default: difficultyColor = '#6c757d';
            }
            $('#exerciseDifficulty').css('background-color', difficultyColor);
            
            // Étoiles d'intensité
            const intensity = Math.min(5, Math.ceil(exercise.calories_par_heure / 150));
            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                starsHTML += `<i class="fas fa-star ${i <= intensity ? 'text-warning' : 'text-muted'}"></i>`;
            }
            $('#intensityStars').html(starsHTML);
            
            // Vidéo
            const videoUrl = exercise.vidéo_url.replace('watch?v=', 'embed/').replace('shorts/', 'embed/');
            $('#exerciseVideo').attr('src', videoUrl);
            
            // Conseils
            const tipsList = $('#exerciseTips');
            tipsList.empty();
            if (exercise.tips) {
                exercise.tips.forEach(tip => {
                    tipsList.append(`<li><i class="fas fa-check text-success me-2"></i>${tip}</li>`);
                });
            }
            
            // Groupes musculaires
            const muscleGroupsList = $('#muscleGroupsList');
            muscleGroupsList.empty();
            const primaryMuscles = exercise.muscle.split(', ')[0];
            muscleGroupsList.append(`
                <div class="d-flex align-items-center mb-2">
                    <div class="muscle-color" style="background-color: ${muscleColor};"></div>
                    <span class="fw-bold">${primaryMuscles}</span>
                    <span class="badge bg-primary ms-2">Principal</span>
                </div>
            `);
            
            // Afficher le modal
            const modal = new bootstrap.Modal(document.getElementById('exerciseModal'));
            modal.show();
        }
        
        // Fonction pour initialiser le tableau DataTables
        function initialiserTableau(exercises) {
            if ($.fn.DataTable.isDataTable('#exercisesTable')) {
                exercisesTable.destroy();
            }
            
            const tableData = exercises.map(exercise => [
                exercise.id,
                `<strong>${exercise.nom}</strong>`,
                `<span class="badge" style="background-color: ${getMuscleColor(exercise.muscle)}; color: white;">${exercise.muscle}</span>`,
                `<span class="badge ${getDifficultyClass(exercise.difficulté)}">${exercise.difficulté}</span>`,
                `<span class="badge bg-primary">${exercise.calories_par_heure} kcal/h</span>`,
                exercise.description.substring(0, 60) + '...',
                `<button class="btn btn-sm btn-outline-primary btn-details" data-id="${exercise.id}">
                    <i class="fas fa-eye me-1"></i>Voir
                </button>`
            ]);
            
            exercisesTable = $('#exercisesTable').DataTable({
                data: tableData,
                columns: [
                    { title: "ID", className: "text-center" },
                    { title: "Exercice" },
                    { title: "Groupe Musculaire" },
                    { title: "Difficulté" },
                    { title: "Calories/h", className: "text-center" },
                    { title: "Description" },
                    { 
                        title: "Actions", 
                        className: "text-center",
                        orderable: false,
                        searchable: false
                    }
                ],
                language: {
                    url: '//cdn.datatables.net/plug-ins/1.13.4/i18n/fr-FR.json'
                },
                pageLength: 10,
                responsive: true,
                order: [[0, 'asc']],
                initComplete: function() {
                    // Ajouter les événements après initialisation
                    $('#exercisesTable').on('click', '.btn-details', function() {
                        const id = $(this).data('id');
                        afficherDetailsExercice(id);
                    });
                }
            });
        }
        
        // Fonction pour obtenir la couleur d'un muscle
        function getMuscleColor(muscle) {
            switch(muscle) {
                case 'Pectoraux': return '#ff6b6b';
                case 'Jambes': return '#4ecdc4';
                case 'Dos': return '#45b7d1';
                case 'Biceps': return '#96ceb4';
                case 'Triceps': return '#ffb23f';
                case 'Abdominaux': return '#aa8ef5';
                case 'Épaules': return '#ff6b81';
                case 'Full Body': return '#667eea';
                default: return '#6c757d';
            }
        }
        
        // Fonction pour obtenir la classe de difficulté
        function getDifficultyClass(difficulty) {
            switch(difficulty) {
                case 'Débutant': return 'difficulty-debutant';
                case 'Intermédiaire': return 'difficulty-intermediaire';
                case 'Avancé': return 'difficulty-avance';
                default: return '';
            }
        }
        
        // Fonction pour afficher les graphiques
        function afficherGraphiques(exercises) {
            // Graphique 1: Répartition par difficulté
            const difficultyCtx = document.getElementById('difficultyChart').getContext('2d');
            const difficultyCounts = {
                'Débutant': exercises.filter(ex => ex.difficulté === 'Débutant').length,
                'Intermédiaire': exercises.filter(ex => ex.difficulté === 'Intermédiaire').length,
                'Avancé': exercises.filter(ex => ex.difficulté === 'Avancé').length
            };
            
            if (difficultyChart) difficultyChart.destroy();
            
            difficultyChart = new Chart(difficultyCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Débutant', 'Intermédiaire', 'Avancé'],
                    datasets: [{
                        data: [difficultyCounts['Débutant'], difficultyCounts['Intermédiaire'], difficultyCounts['Avancé']],
                        backgroundColor: ['#28a745', '#ffc107', '#dc3545'],
                        borderWidth: 2,
                        borderColor: 'white'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // Graphique 2: Calories par groupe musculaire
            const muscleCalorieCtx = document.getElementById('muscleCalorieChart').getContext('2d');
            const muscles = [...new Set(exercises.map(ex => ex.muscle))];
            const avgCaloriesByMuscle = muscles.map(muscle => {
                const muscleExercises = exercises.filter(ex => ex.muscle === muscle);
                const total = muscleExercises.reduce((sum, ex) => sum + ex.calories_par_heure, 0);
                return Math.round(total / muscleExercises.length);
            });
            
            // Couleurs pour les muscles
            const muscleColors = muscles.map(muscle => getMuscleColor(muscle));
            
            if (muscleCalorieChart) muscleCalorieChart.destroy();
            
            muscleCalorieChart = new Chart(muscleCalorieCtx, {
                type: 'bar',
                data: {
                    labels: muscles,
                    datasets: [{
                        label: 'Calories moyennes par heure',
                        data: avgCaloriesByMuscle,
                        backgroundColor: muscleColors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Calories/h'
                            }
                        },
                        x: {
                            ticks: {
                                maxRotation: 45
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }
        
        // Gestion des filtres
        $(document).ready(function() {
            // Charger les exercices
            chargerExercices();
            
            // Filtres par difficulté et calories
            $('.filter-btn').on('click', function() {
                const type = $(this).data('type');
                const filter = $(this).data('filter');
                
                // Désactiver tous les boutons de ce type
                $(`.filter-btn[data-type="${type}"]`).removeClass('active');
                
                // Activer ce bouton
                $(this).addClass('active');
                
                // Mettre à jour les filtres
                currentFilters[type] = filter;
                afficherCartesExercices(exercisesData);
            });
            
            // Recherche
            $('#searchExercise').on('keyup', function() {
                currentFilters.search = $(this).val();
                afficherCartesExercices(exercisesData);
            });
            
            // Réinitialiser les filtres
            $('#resetFilters').on('click', function() {
                currentFilters = {
                    muscle: 'all',
                    difficulty: 'all',
                    calories: 'all',
                    search: ''
                };
                
                // Réinitialiser l'interface
                $('.filter-btn').removeClass('active');
                $('.filter-btn[data-filter="all"]').addClass('active');
                $('.muscle-group').removeClass('active');
                $('.muscle-group[data-muscle="all"]').addClass('active');
                $('#searchExercise').val('');
                
                afficherCartesExercices(exercisesData);
            });
            
            // Ajouter à la séance
            $('#addToWorkoutBtn').on('click', function() {
                const modal = bootstrap.Modal.getInstance(document.getElementById('exerciseModal'));
                const exerciseName = $('#exerciseName').text();
                
                // Animation de confirmation
                const btn = $(this);
                const originalText = btn.html();
                btn.html('<i class="fas fa-check me-2"></i>Ajouté !');
                btn.removeClass('btn-primary').addClass('btn-success');
                
                setTimeout(() => {
                    btn.html(originalText);
                    btn.removeClass('btn-success').addClass('btn-primary');
                    modal.hide();
                    
                    // Notification
                    showNotification(`"${exerciseName}" ajouté à votre séance !`, 'success');
                }, 1000);
            });
        });
        
        // Fonction pour afficher les notifications
        function showNotification(message, type = 'info') {
            const notification = $(`
                <div class="toast align-items-center text-white bg-${type} border-0 position-fixed" 
                     style="top: 20px; right: 20px; z-index: 9999;">
                    <div class="d-flex">
                        <div class="toast-body">
                            ${message}
                        </div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                    </div>
                </div>
            `);
            
            $('body').append(notification);
            const toast = new bootstrap.Toast(notification[0]);
            toast.show();
            
            notification.on('hidden.bs.toast', function() {
                $(this).remove();
            });
        }
    </script>
</body>
</html>